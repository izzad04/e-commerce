<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard - ShopEase</title>

  <!-- BOOTSTRAP + ICONS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- YOUR CSS -->
  <link rel="stylesheet" href="css/style.css">

  <style>
    /* Make dashboard not hidden behind sidebar */
    #mainContent {
      margin-left: 260px;
      padding: 20px;
    }
    .custom-sidebar {
      width: 260px;
      height: 100vh;
      position: fixed;
      left: 0;
      top: 0;
      z-index: 1000;
    }
  </style>
</head>

<body>

<!-- ⭐ SIDEBAR ⭐ -->
<div id="customSidebar" class="custom-sidebar d-flex flex-column bg-body-tertiary shadow-sm">

    <div class="sidebar-menu flex-grow-1 overflow-auto">
        <div class="sidebar-header bg-body-tertiary d-flex justify-content-between p-2">
            <span class="fw-bold">ShopEase</span>
            <button id="closeSidebar" class="btn btn-sm btn-outline-danger">
              <i class="bi bi-x"></i>
            </button>
        </div>

        <div class="menu-item p-2 fw-bold">Dashboard</div>
        <div class="menu-item p-2">Products</div>
        <div class="menu-item p-2">Categories</div>
        <div class="menu-item p-2">Reports</div>
    </div>

    <div class="sidebar-profile border-top p-3">
        <div class="d-flex align-items-center">
            <i class="bi bi-person-circle me-2 fs-4"></i>
            <div>
                <div><strong>Admin</strong></div>
                <small class="text-muted">View Profile</small>
            </div>
        </div>

        <button class="btn btn-outline-secondary btn-sm mt-2 w-100">
            <i class="bi bi-box-arrow-right me-1"></i> Logout
        </button>
    </div>
</div>

<!-- ⭐ TOP NAVBAR ⭐ -->
<nav class="navbar navbar-expand-lg sticky-top bg-body-tertiary shadow-sm" style="margin-left:260px;">
  <div class="container-fluid">

    <button id="toggleSidebarMobile" class="btn btn-sm border-0 d-inline-block d-md-none">
      <i class="bi bi-list"></i>
    </button>

    <h4 class="ms-2 mt-1">Dashboard</h4>

    <div class="ms-auto d-flex align-items-center gap-2">
        <!-- Dark Mode -->
        <button class="btn btn-secondary rounded-circle" style="width:40px;height:40px;">
          <i class="bi bi-moon"></i>
        </button>

        <!-- Notification -->
        <button class="btn btn-secondary rounded-circle" style="width:40px;height:40px;">
          <i class="bi bi-bell"></i>
        </button>

        <!-- Profile -->
        <img src="images/logoshop.jpg" width="40" height="40" class="rounded-circle">
    </div>
  </div>
</nav>

<!-- ⭐ MAIN DASHBOARD CONTENT ⭐ -->
<div id="mainContent">

  <!-- Dynamic Greeting -->
  <h2 id="greetingText" class="mb-4"></h2>

  <!-- KPI CARDS -->
  <div class="row mb-4">
    <div class="col-md-3"><div class="card p-3 shadow-sm">Total Products: <strong id="totalProducts">0</strong></div></div>
    <div class="col-md-3"><div class="card p-3 shadow-sm">Categories: <strong id="totalCategories">0</strong></div></div>
    <div class="col-md-3"><div class="card p-3 shadow-sm">Low Stock: <strong id="lowStock">0</strong></div></div>
    <div class="col-md-3"><div class="card p-3 shadow-sm">Out of Stock: <strong id="outOfStock">0</strong></div></div>
  </div>

  <!-- STOCK TABLE -->
  <h4>Low / Out of Stock Products</h4>
  <table class="table table-bordered">
    <thead>
      <tr><th>Product</th><th>Category</th><th>Stock</th><th>Status</th></tr>
    </thead>
    <tbody id="stockTableBody"></tbody>
  </table>

  <!-- CHARTS -->
  <h4>Products by Category</h4>
  <div class="card p-3 shadow-sm mb-4">
      <canvas id="categoryChart" height="120"></canvas>
  </div>

  <h4>Top-Selling Products</h4>
  <div class="card p-3 shadow-sm">
      <canvas id="topSellingChart" height="120"></canvas>
  </div>

</div>

<!-- SCRIPTS -->
<script src="js/data.js"></script>
<script src="js/dashboard.js"></script>

<script>
    // Greeting Script
    function displayGreeting() {
        const now = new Date();
        const hour = now.getHours();
        let greet = (hour < 12) ? "Good Morning, Admin" :
                    (hour < 18) ? "Good Afternoon, Admin" :
                                  "Good Evening, Admin";
        document.getElementById("greetingText").textContent = greet;
    }
    displayGreeting();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
