<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Products - E-Commerce App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div id="navbar"></div>

<div class="container mt-4">
  <h2>Product List</h2>
  <table id="productsTable" class="table table-striped mt-3">
    <thead><tr><th>#</th><th>Product</th><th>Price</th><th>Stock</th><th>Category</th></tr></thead>
    <tbody></tbody>
  </table>

  <h4 class="mt-4">Product Stock Chart</h4>
  <button id="updateProductChart" class="btn btn-sm btn-info mb-2">Update Chart</button>
  <canvas id="productChart"></canvas>
</div>

<div id="footer"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="js/footer.js"></script>
<script src="js/navbar.js"></script>
<script src="js/script.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function() {
  populateProductsTable();
  if(document.getElementById("productChart")){
    window.productChart = new Chart(document.getElementById("productChart").getContext("2d"), {
      type:'bar',
      data:{
        labels: products.map(p=>p.name),
        datasets:[{ label:'Stock', data: products.map(p=>p.stock), backgroundColor:'rgba(255,99,132,0.7)' }]
      },
      options:{ responsive:true, scales:{ y:{ beginAtZero:true } } }
    });

    document.getElementById("updateProductChart").addEventListener("click", ()=>{
      productChart.data.datasets[0].data = products.map(p=>p.stock);
      productChart.update();
    });
  }
});
</script>

</body>
</html>
